{"version":3,"sources":["applet.js"],"names":[],"mappings":"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","file":"applet.babel.js","sourcesContent":["/* jshint undef: true, unused: true */\n/* global _ , Mustache, promise  */\n\"use strict\";\n\nvar Applet;\n\nApplet = (function () {\n\n  var A;\n\n  A = {\n    log : function () {\n      if (window.console)\n        return console.log.apply(console, arguments);\n      return A;\n    },\n\n    to_type : function (raw) {\n      if (!_.isString(raw))\n        return new Error(\"Only one String allowed.\");\n\n      return raw\n      .split(':')\n      .map(_.trim)\n      .map(function (pair) {\n        return {\n          name: pair[0],\n          type: A.standard_type(pair[1])\n        };\n      });\n    },\n\n    comma_split: function (str) {\n      return str.split(\",\").map(_.trim);\n    },\n\n    is_blank_string : function (str) {\n      return _.trim(str) === '';\n    },\n\n    args : function (raw_args, ...raw_names) {\n      let names = raw_names.map( x => A.to_type(x));\n      return names.reduce(function (o, curr, i, arr) {\n        return raw_args && o && arr;\n      }, {});\n    },\n\n    space_split : function (s) {\n      return s.split(/\\s+/g);\n    },\n\n    funcs : function (mod, ...raw_names) {\n      if (_.isString(mod))\n        return A.funcs(A, [mod].concat(raw_names));\n\n      return _(raw_names)\n      .flattenDeep()\n      .map( A.space_split )\n      .flattenDeep()\n      .map( A.comma_split )\n      .flattenDeep()\n      .reject(A.is_blank_string)\n      .map(function (name) {\n        if (mod.hasOwnProperty(name) && _.isFunction(mod[name]))\n          return mod[name];\n        throw new Error(`Function \"${name.toString}\" not found on: ${mod.toString()}`);\n      })\n      .value();\n    },\n\n    // Examples:\n    //\n    //   .new_id()           ->  String\n    //   .new_id('prefix_')  ->  String\n    //\n    new_id : function (prefix) {\n      if (!A._id)\n        A._id = -1;\n      let _id = A._id + 1;\n      return (prefix) ? `${prefix}${_id}` : `${_id}`;\n    }, // === func\n\n\n    // Returns id.\n    // Sets id of element if no id is set.\n    //\n    // .dom_id(raw_or_jquery)\n    // .dom_id('prefix', raw_or_jquer)\n    //\n    dom_id : function () {\n      var args = _.toArray(arguments);\n      var o      = _.find(args, _.negate(_.isString));\n      var prefix = _.find(args, _.isString);\n      var old    = o.attr('id');\n\n      if (old && !_.isEmpty(old))\n        return old;\n\n      var new_id = Applet.new_id(prefix || 'id_for_applet_') ;\n      o.attr('id', new_id);\n      return new_id;\n    }, // === id\n\n    insert_after : function (script) {\n      $($(script).contents()).insertAfter($(script));\n    }, // === insert_after\n\n    insert_before : function (script) {\n      $($(script).contents()).insertBefore($(script));\n    }, // === insert_before\n\n\n    is_true : function (data, raw_key) {\n      if (!Applet.FRONT_BANGS)\n        Applet.FRONT_BANGS = /^\\!+/;\n\n      var key        = _.trim(raw_key);\n      var bang_match = key.match(Applet.FRONT_BANGS);\n      var dots       = ( bang_match ? key.replace(bang_match[0], '') : key ).split('.');\n      var keys       = _.map( dots, _.trim );\n\n      var current = data;\n      var ans  = false;\n\n      _.detect(keys, function (key) {\n        if (_.has(current, key)) {\n          current = data[key];\n          ans = !!current;\n        } else {\n          ans = undefined;\n        }\n\n        return !ans;\n      });\n\n      if (ans === undefined)\n        return ans;\n\n      if (bang_match) {\n        _.times(bang_match[0].length, function () {\n          ans = !ans;\n        });\n      }\n\n      return ans;\n    }, // === func\n\n    attrs : function (dom) {\n      return _.reduce(\n        dom.attributes,\n        function (kv, o) {\n          kv[o.name] = o.value;\n          return kv;\n        },\n        {}\n      );\n    }, // === attrs\n\n    standard_name : function (str) {\n      return _.trim(str).replace(/\\ +/g, ' ').toLowerCase();\n    },\n\n    remove_attr : function (node, name) {\n      var val = $(node).attr(name);\n      $(node).removeAttr(name);\n      return val;\n    },\n\n    node_array : function (unknown) {\n      var arr = [];\n      _.each($(unknown), function (dom) {\n        if (dom.nodeType !== 1)\n          return arr.push(dom);\n\n        arr.push({\n          tag    : dom.nodeName,\n          attrs  : Applet.attrs(dom),\n          custom : {},\n          childs : Applet.node_array($(dom).contents())\n        });\n      });\n\n      return arr;\n    },\n\n    top_descendents : function (dom, selector) {\n      var arr = [];\n      _.each($(dom), function (node) {\n        var o = $(node);\n        if (o.is(selector))\n          return arr.push(o);\n        arr = arr.concat(Applet.top_descendents(o.children(), selector));\n      }); // === func\n\n      return arr;\n    }, // === func\n\n    key_compiled_for_applet : 'data-compiled_for_applet',\n\n    mark_as_compiled : function (name, unknown) {\n      _.each($(unknown), function (raw_e) {\n        var e         = $(raw_e);\n        var key       = Applet.key_compiled_for_applet;\n        var old_value = e.attr(key) || '';\n        e.attr(key, old_value + ' ' + name);\n      }); // === each\n\n      return unknown;\n    }, // === func\n\n    find : function (name, raw_selector, target) {\n      var selector = raw_selector + ':not(*[' + Applet.key_compiled_for_applet + '~=\"' + name + '\"])';\n      return $(target || $('body')).find(selector).addBack(selector);\n    }, // === func\n\n    // === template ====================\n    template : function (o) {\n      var this_name = \"applet.template.mustache\"\n      if (o.name === 'this position')\n        return 'top';\n\n      var scripts = Applet.find(this_name, 'script[type^=\"text/mustache\"]', o.target);\n\n      if (scripts.length < 1)\n        return;\n\n      _.each(scripts, function (raw) {\n        var t              = $(raw);\n        var types          = t.attr('type').split('/');\n        var html           = t.html();\n        var placeholder_id = Applet.dom_id(t);\n        var data_key       = types[2];\n        var id             = Applet.dom_id(t, 'mustache_templates_' + (data_key || ''));\n        var pos            = 'replace';\n\n        Applet.mark_as_compiled(this_name, t);\n\n        switch (_.trim(types[1])) {\n          case 'mustache-top':\n            pos = 'top';\n          break;\n\n          case 'mustache-bottom':\n            pos = 'bottom';\n          break;\n        } // === switch type[1]\n\n        var meta = {\n          id             : id,\n          key            : data_key,\n          html           : html,\n          mustache       : html,\n          placeholder_id : placeholder_id,\n          elements       : null,\n          pos            : pos\n        };\n\n        A.applet.push(\n          o.applet,\n          function (o, data) {\n            if (o.name !== 'data' || !_.isPlainObject(data[meta.key]))\n              return;\n\n            // === Remove old nodes:\n            if (meta.elements && meta.pos === 'replace') {\n              meta.elements.remove();\n            }\n\n            var html = $(Mustache.render(meta.mustache, data));\n            if (meta.pos === 'replace' || meta.pos === 'bottom')\n              html.insertBefore($('#' + meta.placeholder_id));\n            else\n              html.insertAfter($('#' + meta.placeholder_id));\n\n            meta.elements = html;\n            o.applet.run({\n              name   : o.name,\n              target : html\n            });\n          }\n        ); // === push\n\n      });\n\n    }, // ==== funcs: template ==========\n\n\n    // === show_if ====================\n    show_if : function (o) {\n      var targets    = Applet.find('show_if', '*[data-show_if]', o.target);\n\n      _.each(targets, function (raw_node) {\n        var node    = $(raw_node);\n        var the_key = node.attr('data-show_if');\n        Applet.mark_as_compiled('show_if', node);\n\n        if (!Applet.is_true(o.data_cache, the_key))\n          node.hide();\n\n        var the_id  = Applet.dom_id(node);\n\n        A.applet.push(\n          o.applet,\n          function (o, data) {\n            if (o.name !== 'data') return;\n\n            switch (Applet.is_true(data, the_key)) {\n              case true:\n                $('#' + the_id).show();\n              return;\n\n              case false:\n                $('#' + the_id).hide();\n              return;\n            } // === switch value\n\n          } // === func\n        );\n\n      }); // === each\n\n    }, // === funcs: show_if ========\n\n    // === hide_if ====================\n    hide_if : function (o) {\n      var targets = Applet.find('hide_if', '*[data-hide_if]', o.target);\n\n      _.each(targets, function (raw_node) {\n        var node = $(raw_node);\n        var key  = node.attr('data-hide_if');\n        Applet.mark_as_compiled('hide_if', node);\n\n        if (Applet.is_true(o.data_cache, key) === true)\n          node.hide();\n\n        var id  = Applet.dom_id(node);\n\n        A.applet.push(\n          o.applet,\n          function (o, data) {\n            if (o.name !== 'data') return;\n\n            switch (Applet.is_true(data, key)) {\n              case true:\n                $('#' + id).hide();\n              return;\n              case false:\n                $('#' + id).show();\n              return;\n            } // === switch value\n          }\n        ); // === push\n\n      }); // === each target\n\n    }, // === funcs: hide_if ========\n\n\n    // === ajax =====================\n    ajax : function (o, data) {\n\n      switch (o.name) {\n\n        case 'ajax':\n          if (o['send?']) {\n            o.promise = promise.post(o.url, data, o.headers);\n            o.promise.then(function (err, text, xhr) {\n              o.applet.run({\n                name: 'ajax raw response',\n                raw_response: {err: err, text: text, xhr: xhr},\n                request : {\n                  form_id : o.form_id,\n                  url     : o.url,\n                  data    : data,\n                  headers : o.headers\n                },\n                promise: o.promise\n              });\n            });\n          }\n        break;\n\n        case 'ajax raw response':\n          if (!o.response && o.raw_response) {\n            var raw        = o.raw_response;\n            var status     = o.raw_response.xhr && o.raw_response.xhr.status;\n            var err        = o.raw_response.err;\n            var err_tags   = [];\n            if (err) {\n              err_tags.push('server');\n              err_tags.push(status);\n            }\n\n            var new_o = _.extend({}, o, {\n              name     : \"ajax response\",\n              response : {}\n            });\n\n            var json;\n            try {\n              json = JSON.parse(raw.text);\n            } catch(e) {\n              err = true;\n              if (_.isEmpty(err_tags))\n                err_tags.push('invalid json');\n            }\n\n            if (err)\n              new_o.response = {error: {tags: err_tags, msg: raw.text}};\n            else\n              new_o.response = json;\n\n            o.applet.run(new_o, new_o.response);\n          } // if !o.response && !o.raw_response\n        break;\n\n      } // === switch o.name\n\n    }, // === funcs: ajax\n\n\n    // === form =====================\n    form : function (o) {\n\n      if (o.name === 'ajax response' && o.request) {\n        $('#' + o.request.form_id ).prop('disabled', false);\n        return;\n      }\n\n      if (!o.this_func.submit) {\n        o.this_func.submit = function (a) {\n          return function (e) {\n            var form = $(this).closest('form');\n            form.prop('disabled', true);\n            e.preventDefault();\n            e.stopPropagation();\n\n            promise.get('/_csrf').then(function (err, text) {\n              var data = form.serializeJSON();\n              if (!err) {\n                try {\n                  data._csrf = JSON.parse(text)._csrf || \"\";\n                } catch (e) {\n                }\n              }\n\n              a.run({\n                name    : 'ajax',\n                'send?' : true,\n                form_id : form.attr('id'),\n                url     : form.attr('action'),\n                headers : {\"Accept\": \"application/json\"},\n              }, data);\n            });\n\n          }; // === return function\n        };\n      } // === if this_func\n\n      var targets = Applet.find('form', 'form button.submit', o.target);\n      var i = 0;\n      while (targets[i]) {\n        $(targets[i]).on('click', o.this_func.submit(o.applet));\n        Applet.mark_as_compiled('form', targets[i]);\n        ++i;\n      } // === while\n    }, // === funcs: form\n\n    applet: {\n\n      new: function () {\n        var _the_app_ = { funcs: [], data_cache: {} };\n\n        var fin = {_the_app_: _the_app_};\n        _.forOwn( A.applet, function (func, name) {\n          if (!_.isFunction(func))\n            return;\n          fin[name] = function () {\n\n            fin._the_app_ = func.apply(\n              null,\n              [_the_app_].concat(_.toArray(arguments))\n            );\n\n            return fin;\n          };\n        }); // === forOwn\n\n        fin.value = function () { return _the_app_; };\n        return fin;\n      },\n\n      config_for_func : function (i, f) {\n\n        if (!i.func_ids) {\n          i.func_id_to_config = {}; // === used by callbacks to store info.\n          i.func_ids          = {}; // give each callback an id to be used in .configs\n        }\n\n        var id = _.findKey(i.func_ids, function (v) { return v === f; } );\n\n        if (!id) {\n          id                      = Applet.new_id('config_id_');\n          i.func_id_to_config[id] = {};\n          i.func_ids[id]          = f;\n        }\n\n        return i.func_id_to_config[id];\n      }, // === config_id\n\n      // === Examples:\n      //\n      // .run(name, 'str')\n      // .run(name, 'str', {...})\n      // .run({name: 'str', ... more meta data}, ...data args)\n      //\n      run: function (...raw_args) {\n\n        var instance = raw_args.shift();\n        var first    = raw_args.shift();\n        var args     = raw_args;\n\n        var meta, name;\n\n        if (_.isPlainObject(first)) {\n          meta = _.extend({}, first, {\n            name   : A.standard_name(first.name),\n            applet : instance\n          });\n          name = first.name;\n        } else {\n          meta = {\n            name   : Applet.standard_name(first),\n            applet : instance\n          };\n        }\n\n        if (!_.isString(meta.name))\n          throw new Error(\":name must be a String: \" + meta.name.toString());\n\n        if (meta.name === 'data' && _.isPlainObject(args[0]))\n          instance.data_cache = _.extend(instance.data_cache, args[0]);\n\n        var i = 0, f;\n\n        while (instance.funcs[i]) {\n          f                = instance.funcs[i];\n          meta.this_config = A.applet.config_for_func(instance, f);\n          meta.this_func   = f;\n          meta.data_cache  = instance.data_cache;\n\n          f.apply(null, [meta].concat(args));\n          ++i;\n        }\n\n        return instance;\n      }, // === func\n\n      push_for: function (app, raw_name, ...raw_funcs) {\n        var name = A.standard_name(raw_name);\n        _.each(_.flattenDeep(raw_funcs), function (f) {\n          A.applet.push(app, function (meta, ...args) {\n            if (meta.name !== name)\n              return;\n            return f.apply(null, [meta].concat(args));\n          });\n        });\n        return app;\n      },\n\n      push: function (i, ...raw_arr) {\n        var arr = _.flattenDeep(raw_arr);\n\n        _.each(arr, function (f) {\n\n          if (!_.isFunction(f))\n            throw new Error('Error: Not a function: ' + f.toString());\n\n          if (f({name : 'this position', applet: i}) === 'top')\n          i.funcs.unshift(f);\n          else\n            i.funcs.push(f);\n        });\n\n        return i;\n      }\n\n    }, // === applet { ... }\n\n  }; // === A\n\n  return A;\n\n})(); // === module Applet\n\n"]}