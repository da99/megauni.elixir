{"version":3,"sources":["megauni.js"],"names":[],"mappings":"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","file":"megauni.babel.js","sourcesContent":["/* jshint undef: true, unused: true */\n/* global Applet, _ */\n\"use strict\";\n\n\nvar Megauni;\nMegauni = {\n  on_respond_ok: function() {\n  },\n\n  ui_ajax: function(o) {\n        // === Clear errors:\n        if (o.name === 'dom') {\n            $('input[type=\"text\"], textarea').on('keypress', function () {\n                $(this).closest('div.field').removeClass('field_invalid');\n                $(this).closest('div.form').find('div.error_msg, div.success_msg').remove();\n            });\n            $('form button.submit').on('click', function () {\n                var form = $(this).closest('form');\n                form.find('div.field_invalid').removeClass('field_invalid');\n                form.find('div.error_msg, div.success_msg').remove();\n            });\n        }\n        // === Show loading message: Processing...\n        if (o.name === 'ajax' && o.form_id) {\n            $('#' + o.form_id).closest('div.form').addClass('loading');\n            $('#' + o.form_id + ' div.buttons').after('<div class=\"loading_msg\">Processing...</div>');\n        }\n        if (o.name === 'ajax response' && o.request.form_id) {\n            var div_form = $('#' + o.request.form_id).closest('div.form');\n            div_form\n                .removeClass('loading')\n                .find('div.loading_msg')\n                .remove();\n            // === Display errors:\n            if (o.response.error) {\n                if (_.contains(o.response.error.tags, 'server')) {\n                    Applet.log(o.response.error);\n                    Applet.log(o.response.error.msg || '[No error msg specified.]');\n                    div_form.find('div.buttons').before($('<div class=\"error_msg error_server\"></div>')\n                        .text('Unknown error. Close this browser window and try again in 30 mins.'));\n                }\n                if (o.response.error.fields) {\n                    _.each(o.response.error.fields || [], function (msg, key) {\n                        var field = div_form.find('div.field.' + key + ':first');\n                        if (_.isEmpty(field) && key === 'all') {\n                            field = div_form.find('div.buttons:last');\n                        }\n                        else {\n                            field.addClass('field_invalid');\n                        }\n                        field.after($('<div class=\"error_msg error_' + key + '\"></div>')\n                            .text(msg));\n                    });\n                } // === if error fields\n            } // === end: display errors\n            // === Display success msg:\n            if (o.response.success) {\n                // === reset msg:\n                div_form\n                    .addClass('form_success')\n                    .find('div.success_msg')\n                    .remove();\n                // === add msg:\n                div_form\n                    .find('div.buttons')\n                    .after($('<div class=\"success_msg\"></div>').text(o.response.success.msg));\n            } // === end: display success msg\n        } // === end: display response\n    } // === func ui_ajax\n}; // === Megauni\n\n"]}